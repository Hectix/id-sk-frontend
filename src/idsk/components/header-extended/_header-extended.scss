@import "../../../govuk/settings/all";
@import "../../../govuk/tools/all";
@import "../../../govuk/helpers/all";
@import "../../../govuk/helpers/typography";
@import "./node_modules/@fortawesome/fontawesome-free/scss/fontawesome.scss";

@include govuk-exports("idsk/component/header-extended") {

    /* load font face for FontAwesome icons */
    // TODO: font-face declarations should be moved somewhere ...
    @font-face {
      font-family: "FontAwesome";
      src: govuk-font-url("fa-regular-400.woff2") format("woff2"),
      govuk-font-url("fa-regular-400.woff") format("woff");
      font-weight: normal;
      font-style: solid;
      font-display: fallback;
    }
    @font-face {
      font-family: "FontAwesome";
      src: govuk-font-url("fa-solid-900.woff2") format("woff2"),
      govuk-font-url("fa-solid-900.woff") format("woff");
      font-weight: normal;
      font-style: solid;
      font-display: fallback;
    }
    @font-face {
      font-family: "FontAwesome";
      src: govuk-font-url("fa-brands-400.woff2") format("woff2"),
      govuk-font-url("fa-brands-400.woff") format("woff");
      font-weight: normal;
      font-style: normal;
      font-display: fallback;
    }
    .fa, .fas, .far, .fal, .fad, .fab {
      font-family: "FontAwesome";
    }

    $idsk-header-background: govuk-colour("white");
    $idsk-header-border-color: $idsk-brand-colour;
    $idsk-header-dark-blue: govuk-colour("dark-blue");
    $idsk-header-light-blue: #0065B3;
    $idsk-header-link: govuk-colour("white");
    $idsk-header-link-active: govuk-colour("white");
    $idsk-header-nav-item-border-color: #2e3133;
    

    .idsk-header-extended {
      @include govuk-font($size: 16);
  
      color: $idsk-header-dark-blue;
      background: $idsk-header-background;

      &::after {
        content: "";
        display: block;
        width: 100%;
        height: 2px;
        background-color: $idsk-header-dark-blue;
      }

      &__container--full-width {
        padding: 0 govuk-spacing(3);
        border-color: $idsk-header-border-color;
    
        .idsk-header-extended__menu-button {
          right: govuk-spacing(3);
        }
      }

      &__container {
        @include govuk-clearfix;
        position: relative;
      }

      &__logotype-crown {
        position: relative;
        fill: currentColor;
        vertical-align: top;

        &-fallback-image {
          width: 36px;
          height: 32px;
          border: 0;
          vertical-align: middle;
        }
      }

      &__logo {
        padding-left: 5px;
        padding-bottom: 15px;

        @include mq ($from: desktop) {
          padding-bottom: 40px;
          padding-left: 35px;
        }
      }

      &__content {
        @include mq ($from: desktop) {
          float: left;
        }
      }

      &__logo,
      &__content {
        box-sizing: border-box;
      }

      &__menu-button {
        @include govuk-font($size: 24);
        font-weight: 700;
        position: absolute;
        top: 5px;
        right: 0;
        padding: 0;
        border: 0;
        color: $idsk-header-dark-blue;
        background: none;
        display: none;
        align-items: center;
      }

      /* info bar - search, language, social icons */
      &__info {
        text-align: right;

        & > div {
          display: inline-block;
        }

        &-search {
          cursor: pointer;
          outline: none;

          &-text i {
            font-size: 12px;
            padding-right: 10px;
          }

          &-form {
            display: none;

            & input,& input:focus {
              padding: 5px;
              border: 3px solid govuk-colour("orange");
              margin-right: -3px;
              outline: none;
            }

            i {
              font-size: 12px;
            }
            a {
              padding: 5px 7px 4px 6px;
              margin-top: 2px;
              margin-bottom: 22px;
            }
          }

          .--show {
            display: inline;
          }
          .--hide {
            display: none;
          }
        }
        /* language selector */
        &-language {
          position: relative;
          vertical-align: text-top;
          cursor: pointer;
          width: 150px;

          &-input {
            display: none;
          }

          &-wrapper {
            padding-right: 10px;
            z-index: 1050;
            position: absolute;
            right: 0;
          }

          &-list {
            display: none;
            background-color: #ffffff;
            border: 1px solid #c0c0c047;

            ul {
              list-style: none;
              padding: 5px;
              text-align: left;
              margin: 0;
            }

            span:hover {
              text-decoration: underline
            }
          }
          
          /* arrow at the end of language switcher */
          &--current-text {
            padding-right: 20px;

            &:after {
              position: absolute;
              margin-top: 8px;
              border-style: solid;
              border-width: 5px 5px 0;
              border-color: $idsk-header-dark-blue transparent transparent;
              content: "";
              transition: transform 0.2s;
            }

            & > span {
              margin-right: 15px;
            }
          }

          &--active &--current::after {
            transition: transform 0.2s;
            transform: rotate(180deg);
          }

          &--active &-list {
            display: inline-block;
          }
        }

        /* social icons */
        &-social {
          ul {
            display: block;
            list-style: none;
            padding-left: 10px;
          }
  
          &_item {
            display: inline-block;
            padding: govuk-spacing(1);
  
            a {
              color: $idsk-header-dark-blue;
            }
          }
        }
      }

      /* menu - navigation */
      &__navigation {
        display: block;
        margin: 0;
        padding: 0;
        list-style: none;

        &-item {
          padding: 0px;
      
          @include mq ($from: desktop) {
            display: inline-block;
            border: none;
          }
      
          & > a {
            @include govuk-font($size: 16, $weight: bold);
            white-space: nowrap;
            outline: none;
            text-decoration: none;
            padding: 15px 25px;

            &:link,
            &:hover,
            &:visited,
            &:active  {
              color: $idsk-header-dark-blue;
              line-height: 50px;
            }
          }

          &--active {
            background-color: $idsk-header-dark-blue;
        
            a {
              &:link,
              &:hover,
              &:visited {
                color: $idsk-header-link-active;
                outline: none;
              }
            }
          }
        }

        /* submenu */
        &-submenu {
          display: none;
          position: absolute;
          left: 0;
          background-color: $idsk-header-dark-blue;
          width: 100%;
          padding: 20px 0px;
          z-index: 10;

          a {
            color: $idsk-header-link;
            font-size: 16px;
            font-weight: 400;
            line-height: 20px;
            font-style: normal;
            text-decoration: none;

            &:hover {
              text-decoration: underline;
            }
          }

          ul {
            display: block;
            padding-left: 5px;

            li {
              display: inline-block;
              padding: 5px 20px;
              width: 20%;
              color: $idsk-header-link;

              &:before {
                content: "\2022"; /* unicode for a bullet */
                color: $idsk-header-light-blue;
                font-weight: bolder;
                display: inline-block;
                width: 20px;
                font-size: 20px;
              }

              i {
                font-size: 10px;
                padding-right: 8px;
              }
            }
          }

          &--open {
            display: block;
          }
        }
      }

    }

  @include govuk-media-query($media-type: print) {
    .idsk-header-extended {
      border-bottom-width: 0;
      color: govuk-colour("black");
      background: transparent;

      // Hide the inverted crown when printing in browsers that don't support SVG.
      &__logotype-crown-fallback-image {
        display: none;
      }

      &__link {
      &:link,
      &:visited {
        color: govuk-colour("black");
      }
    }

    // Do not append link href to GOV.UK link when printing (e.g. '(/)')
    &:after {
        display: none;
      }
    }
  }

  .js-enabled {
    .idsk-header-extended {

      &-overlay {
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background: $idsk-header-dark-blue;
        overflow-x: hidden;
        transition: 0.5s;
      }

      &__menu-button {
        display: inline-flex;
        @include mq ($from: desktop) {
          display: none;
        }
      }

      &__navigation {
        display: none;
        @include mq ($from: desktop) {
          display: block;
        }
              
        &--open {
          display: block;
        }
      }

      &__info {
        display: none;
        @include mq ($from: desktop) {
          display: block;
        }
      }

    }
  }

}