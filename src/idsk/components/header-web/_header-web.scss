@import "../../../govuk/base";
@import "../../../govuk/helpers/typography";

@include govuk-exports("idsk/component/header-web") {
  $idsk-header-background-primary: govuk-colour("white") !default;
  $idsk-header-background-secondary: govuk-colour("dark-blue") !default;
  $idsk-header-text-primary: govuk-colour("dark-blue") !default;
  $idsk-header-text-secondary: govuk-colour("white") !default;

  $idsk-header-link: govuk-colour("white") !default;
  $idsk-header-dark-blue: govuk-colour("dark-blue") !default;

  $idsk-header-logo-height: 40px;

  .idsk-header-web {

    &::before {
      content: "";
      display: block;
      width: 100%;
      height: 3px;
      background-image: linear-gradient(
        to right,
        #ffffff 0%,
        #ffffff 33.3%,
        #003183 33.3%,
        #003183 66.6%,
        #d0190f 66.6%,
        #d0190f 100%
      );
      /* equivalent to (to right, white, white 50%, black 50%, black) */
      background-size: 150px 100%;
      background-repeat: repeat;
    }

    &__flag {
      background-color: govuk-colour("black");
      -webkit-mask: url(/assets/images/header-web/flag.svg) no-repeat center;
      mask: url(/assets/images/header-web/flag.svg) no-repeat center;

      display: inline-block;
      -webkit-mask-size: contain;
      mask-size: contain;
      height: 16px;
      width: 14px;
    }

    &__link-arrow {
      background-color: govuk-colour("black");
      -webkit-mask: url(/assets/images/header-web/navigation-arrow.svg) no-repeat center;
      mask: url(/assets/images/header-web/navigation-arrow.svg) no-repeat center;

      display: inline-block;
      width: 10px;
      height: 10px;
      margin-left: govuk-spacing(2);
    }

    &__link-arrow-mobile {
      background-color: govuk-colour("black");
      -webkit-mask: url(/assets/images/header-web/navigation-arrow-mobile.svg) no-repeat center;
      mask: url(/assets/images/header-web/navigation-arrow-mobile.svg) no-repeat center;

      display: inline;
      -webkit-mask-size: contain;
      mask-size: contain;
      width: 13px;
      height: 8px;
      float: right;
    }

    &__warning-icon {
      background-color: govuk-colour("red");
      -webkit-mask: url(/assets/images/header-web/warning.svg) no-repeat center;
      mask: url(/assets/images/header-web/warning.svg) no-repeat center;
      border-radius: 100%;

      display: inline-block;
      width: 16px;
      height: 16px;
      margin: 2px govuk-spacing(2) -2px 0;
    }

    &__menu-open {
      background-color: govuk-colour("black");
      -webkit-mask: url(/assets/images/header-web/menu.svg) no-repeat center;
      mask: url(/assets/images/header-web/menu.svg) no-repeat center;

      display: inline-block;
      width: 13px;
      height: 13px;
    }
  }

  /* BRAND BAR */
  .idsk-header-web__brand {
    background-color: $idsk-header-background-secondary;
    color: $idsk-header-text-secondary;

    .govuk-body-s,
    .govuk-link { 
        color: $idsk-header-text-secondary;
    }

    &-gestor {
      float: left;

      .govuk-body-s {
        display: inline-block;
      }
  
      .govuk-body-s,
      .govuk-link {
        margin: govuk-spacing(2) 0;

        @include mq($until: tablet) {
          margin: 11px 0;
        }
      }
  
      .govuk-link:focus {
        color: govuk-colour("black");
  
        .idsk-header-web__link-arrow {
          background-color: govuk-colour("black");
        }
      }
  
      .idsk-header-web__link-arrow {
        background-color: $idsk-header-text-secondary;
      }
  
      .idsk-header-web__flag {
        background-color: $idsk-header-text-secondary;
        margin: 12px govuk-spacing(2) 12px 0;
        float: left;

        @include mq($until: tablet) {
          height: 15px;
          width: 12px;
        }
      }

      &-button {
        @include govuk-font($size: 16);
  
        padding: 0;
        background: none;
        border: none;
        color: $idsk-header-text-secondary;
        font-weight: 700;
  
        &:hover {
          text-decoration: underline;
        }
  
        &:focus {
          @include govuk-focused-text;
          text-decoration: underline;
          box-shadow: none;
  
          .idsk-header-web__link-arrow {
            background-color: govuk-colour("black");
          }
        }
  
        &––active {
          .idsk-header-web__link-arrow {
            transition: transform 0.2s;
            transform: rotate(180deg);
          }
        }
      }
    }

    &-dropdown {
      overflow: hidden;
      display: none;
      .govuk-body-s:first-child {
        font-weight: 700;
        margin: govuk-spacing(4) 0 0;
      }
      .govuk-body-s:last-child {
        margin-bottom: govuk-spacing(4) ;
      }
    }



    /* language selector */
    &-language {
      float: right;
      @include govuk-font($size: 19);

      .idsk-header-web__link-arrow {
        background-color: $idsk-header-background-primary;
      }

      &--active {

        .idsk-header-web__brand-language-list {
          display: block;
          position: absolute;
          z-index: 2;
          width: 150px;
          box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.15);
          border-radius: 8px;
        }

        .idsk-header-web__link-arrow {
          transition: transform 0.2s;
          transform: rotate(180deg);
        }
      }

      &-button {
        @include govuk-font($size: 16);

        background: none;
        border: none;
        color: $idsk-header-text-secondary;
        margin: 9px 0 9px 0;

        &:hover {
          text-decoration: underline;
        }

        &:focus {
          @include govuk-focused-text;
          text-decoration: underline;
          box-shadow: none;

          .idsk-header-web__link-arrow {
            background-color: govuk-colour("black");
          }
        }

        @include mq($until: tablet) {
          margin-top: 8px;
          font-size: 18px;
        }
      }

      &-list {
        display: none;

        list-style: none;
        padding: govuk-spacing(2) 0;
        margin: 0;
        text-align: left;
        background-color: govuk-colour("white");
      }
    }

    .idsk-header-extended__language-list-item-link {
      color: govuk-colour("black");
      display: block;
      text-decoration: none;
      padding: govuk-spacing(2);

      &:hover {
        text-decoration: underline;
      }
      &:focus,
      &:active {
        box-shadow: none;
      }
    }

    &--light {
      background-color: govuk-colour("grey-4");

      .govuk-body-s,
      .govuk-link,
      .idsk-header-web__brand-language-button,
      .idsk-header-web__brand-gestor-button{
        color: govuk-colour("black");
      }

      .idsk-header-web__link-arrow,
      .idsk-header-web__flag{
        background-color: govuk-colour("black");
      }
    }
  }

  /* MAIN SECTION */
  .idsk-header-web__main {

    .govuk-grid-column-one-third{
      overflow: auto;
    }

    &--buttons {
      display: inline;
    }

    &-headline {
      margin: govuk-spacing(6) 0;

      &-logo {
        float: left;
        max-height: 40px;
        margin-right: govuk-spacing(3);

        @include mq($until: tablet) {
          max-height: 30px;
        }
      }

      .govuk-heading-m {
        float: left;
        margin: govuk-spacing(1) 0;
        color: $idsk-header-text-primary;
      }

      &-menu-button {
        display: none;
      }

      @include mq($until: tablet) {
        &-menu-button {
          display: block;
          background-color: $idsk-header-background-primary;
          width: auto;
          float: right;
          box-shadow: none;
          border: 1px solid govuk-colour("black");
          color: govuk-colour("black");
          font-weight: 700;
          font-size: 18px;
          padding-top: 6px;
          padding-bottom: 6px;

          &:hover {
            background-color: $idsk-header-background-primary;
            color: govuk-colour("black");
          }

          .idsk-header-web__menu-open {
            margin-left: govuk-spacing(3);
          }
        }
      }
      
    }

    &-action {
        float: right;

        /* search bar */
        &-search {
          @include govuk-font($size: 19);

          outline: 1px solid govuk-colour("black");
          display: inline-block;
          margin: 30px 0;

          .govuk-input {
            position: relative;
            border: none;
            height: 40px;
            width: 256px;
            padding: 8px 12px;

            &:focus {
              z-index: 2;
            }
          }

          .govuk-button {
            height: 40px;
            width: 44px;
            font-size: 17px;
            margin: 0;
            padding-top: 7px;
            padding-left: govuk-spacing(2);
            box-shadow: none;
            background-color: govuk-colour("blue");

            &::before {
              bottom: -2px;
            }
          }
        }

        .idsk-button {
          margin: 29px 0 govuk-spacing(6) govuk-spacing(2);
          padding: 9px 10px 8px;
        }
      
        // mobile version
        @include mq($until: tablet) {
          float: none;

          &-search {
            display: none;
          }
        }
    }

    @include mq($until: tablet){
      &--buttons {
        display: none;
      }
    }
  }

  /* NAV BAR */
  .idsk-header-web__nav {

    display: block;
    margin: 0;
    padding: 0;
    list-style: none;
    border-top: 1px solid govuk-colour("grey-3");

    .idsk-header-web__main--buttons,
    .idsk-header-web__main-action-search {
      display: none;
    }

    .idsk-header-web__main--buttons {
      margin-top: govuk-spacing(4);
    }
    

    // &-separator {
    //   display: none;

    //   @include mq($until: tablet) {
    //     display: block;
    //     height: 2px;
    //     width: 100%;
    //     background-color: govuk-colour("grey-3");
    //     margin-bottom: 18px;
    //   }

    // }

    &-list {
      list-style: none;
      padding: 0;
      margin: 0;

      &-item {

        @include mq($from: desktop) {
          display: inline-block;
          border: none;  
        }

        &-link{
          @include govuk-font($size: 19);
          padding: govuk-spacing(3) govuk-spacing(3) govuk-spacing(2) govuk-spacing(3);
          white-space: nowrap;
          text-decoration: none;
          color: govuk-colour("black");
          box-shadow: none;
          display: inline-block;

          .idsk-header-web__link-arrow-mobile {
            display: none;
          }

          .idsk-header-web__nav-list-item-link-arrow {
            background-color: govuk-colour("black");
            -webkit-mask: url(/assets/images/header-web/navigation-arrow.svg) no-repeat center;
            mask: url(/assets/images/header-web/navigation-arrow.svg) no-repeat center;

            
            width: 10px;
            height: 10px;
            margin-left: govuk-spacing(2);
          }

          &:hover {
            text-decoration: underline;
          }

          &:link,
          &:hover,
          &:visited {
            color: govuk-colour("black");
          }

          &:focus,
          &:active {
            @include govuk-focused-text;
            box-shadow: none;
          }
        }
      }
    }

    &--dark {
      background-color: $idsk-header-background-secondary;

      .idsk-header-web__link-arrow {
        background-color: $idsk-header-text-secondary;
      }

      .idsk-header-web__nav-list-item-link {
        color: $idsk-header-text-secondary;

        &:focus,
        &:active {
          color: govuk-colour("black");

          .idsk-header-web__link-arrow {
            background-color: govuk-colour("black");
          }
        }
      }
    }

    @include mq($until: tablet) {
      border-top: none;

      nav {
        border-bottom: 2px solid govuk-colour("grey-3");
      }

      .govuk-grid-column-full:last-child {
        box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.15);
      }

      .idsk-header-web__main--buttons,
      .idsk-header-web__main-action-search {
        display: block;
      }

      .idsk-header-web__main-action-search {
        margin: 0;

        .govuk-input {
          width: calc(100% - 44px);
        }

        .govuk-button {
          float: right;
        }
      }
      
      &-list {
        margin: govuk-spacing(3) -15px govuk-spacing(3) -15px;
        &-item {
          &-link {
            font-size: 24px;
            font-weight: 700;
            width: 100%;
            box-sizing: border-box;
            padding: govuk-spacing(2) govuk-spacing(4);

            .idsk-header-web__link-arrow {
              display: none;
            }

            .idsk-header-web__link-arrow-mobile {
              margin-top: govuk-spacing(2);
              display: inline;
            }
          }
        }
      }

      
    }
  }

    /* navigation - submenu */
    .idsk-header-web__nav-submenu {

      @include govuk-clearfix;
      background-color: $idsk-header-background-secondary;
      display: none;
  
      &-list {
        background-color: $idsk-header-dark-blue;
        list-style-type: none;
        
        @include mq($from: desktop) {
          padding: 0 0;
          margin: 0;
        }
  
        &-item-link{
            padding: 12px govuk-spacing(4) 13px govuk-spacing(3);
            text-decoration: none;
            display: block;

            &:link,
            &:visited {
              color: $idsk-header-text-secondary;
            }

            &:hover {
              text-decoration: underline;
            }
    
            &:focus,
            &:active {
              box-shadow: none;
              color: govuk-colour("black");
            }
          }
      }
    }

    /* navigation - submenulite */
  .idsk-header-web__nav-submenulite {

    position: relative;
    left: govuk-spacing(3);
    display: none;

    &-list {
      background-color: $idsk-header-dark-blue;
      list-style-type: none;
      

      @include mq($from: desktop) {
        position: absolute;
        padding: govuk-spacing(3) 0;
        margin-top: govuk-spacing(3);
        width: 250px;
      }

      &-item-link{
          padding: govuk-spacing(2) govuk-spacing(4) govuk-spacing(2) govuk-spacing(3);
          display: inline-block;
          text-decoration: none;
          box-sizing: border-box;
          width: 100%;

          &:link,
          &:visited {
            color: $idsk-header-text-secondary;
          }
          
          &:hover {
            text-decoration: underline;
          }

          &:focus,
          &:active {
            @include govuk-focused-text;
            box-shadow: none;
          }
        }
    }
  }

  /* BANNER SECTION */
  .idsk-header-web__banner {

    padding: govuk-spacing(3) 0;
    background-color: govuk-colour("yellow");

    &--warning {
      background-color: govuk-colour("grey-4");
    }

    &-title {
      margin: 0;
      font-weight: 700;
      display: inline-block;
    }
  }
}
