{% set openFilter = params.openFilter if params.openFilter else 'Rozbaliť filter' %}
{% set closeFilter = params.closeFilter if params.closeFilter else 'Zbaliť filter' %}
{% set filterContentTitle = params.filterContentTitle if params.filterContentTitle else 'Filtrovať obsah' %}
{% set activeFiltersTitle = params.activeFiltersTitle if params.activeFiltersTitle else 'Aktívny filter' %}
{% set filterSelectedText = params.filterSelectedText if params.filterSelectedText else 'Filtrovať vybrané' %}
{% set removeAllFilters = params.removeAllFilters if params.removeAllFilters else 'Zrušiť všetko' %}

{% macro filters(filters) %}
  {% for item in filters %}
    <div class="govuk-grid-column-one-third-from-desktop">
      <div class="govuk-form-group">
        <label class="govuk-label" for="{{ item.id }}">
          {{ item.inputTitle }}
        </label>
        {% if item.options %}
          <select class="govuk-select" id="{{ item.id }}" name="{{ item.id }}">
            {% for option in item.options %}
              <option {{ "selected" if option.selected == "True" }} {{ "disabled" if option.disabled == "True" }}
                value="{{ option.value }}">{{ option.inputTitle }}</option>
            {% endfor %}
          </select>
        {% else %}
          <input class="govuk-input" id="{{ item.id }}" name="{{ item.id }}" type="text" placeholder="{{ item.inputTitle }}">
        {% endif %}
      </div>
    </div>
  {% endfor %}
{% endmacro %}

{% macro expandFilterToggle(params) %}
  <div class="govuk-body govuk-link idsk-filter-menu__toggle" data-open-filter="{{ openFilter }}" data-close-filter="{{ closeFilter }}">
    {{ openFilter }}
  </div>
{% endmacro %}

<div data-module="idsk-table-filter" id="{{ params.id }}" class="idsk-table-filter {{ params.classes if params.classes }}">
  <div class="idsk-table-filter__panel idsk-table-filter__inputs">
    <div class="idsk-table-filter__title govuk-heading-m">{{ filterContentTitle }}</div>
    {{ expandFilterToggle(params) }}
    <div class="idsk-table-filter__content">
      {% if params.categories %}
        {% for category in params.categories %}
          <div class="idsk-table-filter__category">
            <div class="idsk-table-filter__title govuk-heading-s">{{ category.title }} <span class="count"></span></div>
            {{ expandFilterToggle(params) }}
            <div class="idsk-table-filter__content">
              <div class="govuk-grid-row idsk-table-filter__filter-inputs">
                {{ filters(category.filters) }}
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <div class="govuk-grid-row idsk-table-filter__filter-inputs">
          {{ filters(params.filters) }}
        </div>
      {% endif %}
      <button type="submit" class="idsk-button submit-table-filter" disabled="disabled">
        {{ filterSelectedText }} (<span class="count">0</span>)
      </button>
    </div>
  </div>
  <div class="idsk-table-filter__panel idsk-table-filter__active-filters idsk-table-filter__active-filters__hide"
       data-remove-all-filters="{{ removeAllFilters }}">
    <div class="govuk-body idsk-table-filter__title">{{ activeFiltersTitle }}</div>
    {{ expandFilterToggle(params) }}
    <div class="govuk-clearfix idsk-table-filter__content"></div>
  </div>
</div>
